@model IEnumerable<WebQuanLySpare.Models.danhsachlinhkien>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("index", "danhsachlinhkiens", FormMethod.Get, new { @class = "form-inline" }))
{
    <div class="col-lg-12">
        <div class="input-bar" style="margin-top: 20px; display:table">
            <div class="input-bar-item" style="display:table-cell">
                <form>
                    <div class="input-group">
                        <div>
                            @Html.DropDownList("tenmodel", null, "Tổng hợp", htmlAttributes: new { @class = "form-control" })
                        </div>
                        <span class="input-group-btn">
                            <button class="btn btn-primary"><i class="fa fa-search"></i> Lọc dữ liệu</button>
                        </span>
                    </div>
                </form>
            </div>
        </div>
    </div>
}

<div class="col-lg-12" style="margin-top:10px">
    <div class="row">
        <div class="col-sm-4">
            <div class="panel panel-info">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-database fa-3x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            @if (TempData["tongsolinhkien"] != null)
                            {
                                <div class="huge">@TempData["tongsolinhkien"]</div>
                            }
                            else
                            {
                                <div class="huge">0</div>
                            }

                            <div>Tổng số lượng linh kiện</div>
                        </div>
                    </div>
                </div>
                <a data-toggle="modal" data-target="#">
                    <div class="panel-footer">
                        <span class="pull-left">Xem chi tiết</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-shopping-cart fa-3x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            @if (TempData["tongsodathang"] != null)
                            {
                                 <div class="huge">@TempData["tongsodathang"]</div> 
                            }
                            else
                            {
                                <div class="huge">0</div>

                            }
                            <div>Linh kiện đang đặt hàng</div>
                        </div>
                    </div>
                </div>
                <a data-toggle="modal" data-target="#modallinhkiendangdat">
                    <div class="panel-footer">
                        <span class="pull-left">Xem chi tiết</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="panel panel-danger">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-warning fa-3x"></i>

                        </div>
                        <div class="col-xs-9 text-right">
                            @if (TempData["linhkiencandat"] != null)
                            {
                                <div class="huge">@TempData["linhkiencandat"]</div>
                            }
                            else
                            {
                                <div class="huge">0</div>

                            }
                            <div>Linh kiện còn số lượng ít</div>
                        </div>
                    </div>
                </div>
                <a data-toggle="modal" data-target="#modallinhkiencandat">
                    <div class="panel-footer">
                        <span class="pull-left">Xem chi tiết</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<div class="col-lg-12">
    <div class="panel panel-primary">
        <div class="panel-heading" style="text-align:center">
            <i class="fa fa-list"></i> <b>DANH SÁCH LINH KIỆN</b>
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
            <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                <thead>
                    <tr>
                        <th style="font-size: small">Tồn kho</th>
                        <th style="font-size: small">Tên linh kiện</th>
                        <th class="col-sm-2" style="font-size: small">Mã linh kiện</th>
                        <th style="font-size: small">Maker</th>
                        <th style="font-size: small">Đơn vị</th>
                        <th style="font-size: small">Đơn giá (VNĐ)</th>
                        <th class="col-sm-2">Ghi chú</th>
                        <th class="col-sm-2"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="odd gradeX">
                            @if (item.tonkho <= 5)
                            {
                                <td class="center" style="background-color: #CD6155; color: white; text-align: center; font-size: small ">
                                    @Html.DisplayFor(modelItem => item.tonkho)
                                </td>
                                <td style="background-color: #CD6155; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.tenlinhkien)
                                </td>
                                <td style="background-color: #CD6155; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.malinhkien)
                                </td>
                                <td class="center" style="background-color: #CD6155; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.maker)
                                </td>
                                <td class="center" style="background-color: #CD6155; color: white; font-size: small ">
                                    @Html.DisplayFor(modelItem => item.donvi)
                                </td>
                                <td style="background-color: #CD6155; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.dongia)
                                </td>

                                <td class="center" style="background-color: #CD6155; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.ghichu)
                                </td>
                                <td style="background-color: #CD6155; color: white; text-align: center; border-color: white; font-size: small">
                                    <a href="@Url.Action("Details", new { id = item.id })" class="btn btn-sm btn-info ">
                                        <i class="fa fa-eye"></i> Xem
                                    </a>
                                    <a href="@Url.Action("Edit", new { id = item.id })" class="btn btn-sm btn-warning ">
                                        <i class="fa fa-pencil"></i> Sửa
                                    </a>
                                    <a href="@Url.Action("Delete", new { id = item.id })" class="btn btn-sm btn-danger">
                                        <i class="fa fa-trash"></i> Xoá
                                    </a>
                                </td>
                            }
                            else
                            {
                                <td class="center" style="background-color: #229954; color: white; text-align: center; font-size: small">
                                    @Html.DisplayFor(modelItem => item.tonkho)
                                </td>
                                <td style="background-color: #229954; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.tenlinhkien)
                                </td>
                                <td style="background-color: #229954; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.malinhkien)
                                </td>
                                <td class="center" style="background-color: #229954; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.maker)
                                </td>
                                <td class="center" style="background-color: #229954; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.donvi)
                                </td>
                                <td style="background-color: #229954; color: white; font-size: small ">
                                    @Html.DisplayFor(modelItem => item.dongia)
                                </td>

                                <td class="center" style="background-color: #229954; color: white; font-size: small">
                                    @Html.DisplayFor(modelItem => item.ghichu)
                                </td>
                                <td style="background-color: #229954; color: white; text-align: center; font-size: small">
                                    <a href="@Url.Action("Details", new { id = item.id })" class="btn btn-xs btn-info ">
                                        <i class="fa fa-eye"></i> Xem
                                    </a>
                                    <a href="@Url.Action("Edit", new { id = item.id })" class="btn btn-xs btn-warning ">
                                        <i class="fa fa-pencil"></i> Sửa
                                    </a>
                                    <a href="@Url.Action("Delete", new { id = item.id })" class="btn btn-xs btn-danger">
                                        <i class="fa fa-trash"></i> Xoá
                                    </a>
                                </td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
            <!-- /.table-responsive -->
        </div>
        <!-- /.panel-body -->
    </div>
</div>


<div class="modal fade" id="modallinhkiencandat" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel">Danh sách linh kiện cần đặt hàng</h4>
            </div>
            <div class="modal-body table-responsive" style=" scroll-behavior:auto">
                <table class="table table-striped table-bordered table-hover">
                    <thead class="success">
                        <tr>
                            <th style="font-size:small">Tồn kho</th>
                            <th style="font-size:small">Tên linh kiện</th>
                            <th style="font-size:small">Mã linh kiện</th>
                            <th style="font-size:small">Maker</th>
                            <th style="font-size:small">Đơn vị</th>
                            <th style="font-size:small">Đơn giá (VNĐ)</th>
                            <th style="font-size:small">Ghi chú</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{if (TempData["list_linhkiencandat"] != null)
                            {
                                foreach (var item in (IEnumerable<WebQuanLySpare.Models.danhsachlinhkien>)TempData["list_linhkiencandat"])
                                {
                                    <tr>

                                        <td style="color:red ; text-align:center ; font-size:small">
                                            <strong>@Html.DisplayFor(modelItem => item.tonkho)</strong>
                                        </td>
                                        <td style="font-size:small">
                                            @Html.DisplayFor(modelItem => item.tenlinhkien)
                                        </td>
                                        <td style="font-size:small">
                                            @Html.DisplayFor(modelItem => item.malinhkien)
                                        </td>
                                        <td style="font-size:small">
                                            @Html.DisplayFor(modelItem => item.maker)
                                        </td>
                                        <td style="font-size:small">
                                            @Html.DisplayFor(modelItem => item.donvi)
                                        </td>
                                        <td style="font-size:small">
                                            @Html.DisplayFor(modelItem => item.dongia)
                                        </td>
                                        <td style="font-size:x-small">
                                            @Html.DisplayFor(modelItem => item.ghichu)
                                        </td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>
                </table>
            </div>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class="modal fade" id="modallinhkiendangdat" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel">Danh sách linh kiện đang đặt hàng</h4>
            </div>
            <div class="modal-body table-responsive" style=" scroll-behavior:auto">
                <table class="table table-striped table-bordered table-hover">
                    <thead class="success">
                        <tr>
                            <th style="font-size: small">Tên linh kiện</th>
                            <th style="font-size: small">Ngày đặt hàng</th>
                            <th style="font-size: small">Mã linh kiện</th>
                            <th style="font-size: small">Maker</th>
                            <th style="font-size: small">Số lượng</th>
                            <th style="font-size: small">Đơn vị</th>
                            <th style="font-size: small">Đơn giá</th>
                            <th style="font-size: small">Thành tiền</th>
                            <th style="font-size: small">Ghi chú</th>
                            <th style="font-size: small">Trạng thái</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @{if (TempData["list_dangdathang"] != null)
                            {
                                foreach (var item in (IEnumerable<WebQuanLySpare.Models.dathang>)TempData["list_dangdathang"])
                                {
                                                <tr>

                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.tenlinhkien)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.ngaydathang)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.malinhkien)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.maker)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.soluong)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.donvi)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.dongia)<text> VNĐ</text>
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.thanhtien)<text> VNĐ</text>
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.ghichu)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.trangthai)
                                                    </td>
                                                    <td>
                                                        <a href="@Url.Action("Edit","dathangs", new { id = item.id })" class="btn btn-xs btn-success btn-block">
                                                            <i class="fa fa-check-circle"></i> Xác nhận về
                                                        </a>
                                                    </td>
                                                </tr>
                                }
                            }
                        }
                    </tbody>
                </table>
            </div>

        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>